(()=>{let e;function s(){window.parent.postMessage({closeWindow:!0,portSelf:e},"*",[e])}function t(e){const s=e.data;if(s&&s.progressLists){reloadIcon.classList.remove("roating"),s.progressLists;const e=["successImages","errorImages","queueImages"],t={successImages:"successHolder",errorImages:"errorHolder",queueImages:"queueHolder"},a={successImages:"success",errorImages:"error",queueImages:"queue"},r=s.progressLists,o=r.flexatarCount;flexatarCountTextElement.textContent=`${o}`,delete r.flexatarCount,o<=0?(canCreateFlexatarSign.classList.add("invisible"),canNotCreateFlexatarSign.classList.remove("invisible")):(canCreateFlexatarSign.classList.remove("invisible"),canNotCreateFlexatarSign.classList.add("invisible"));const i=r.isQueueInProgress;delete r.isQueueInProgress,i?(queueHolder.classList.add("blinking-border"),startMakeQueue.classList.add("selected-button"),pauseMakeQueue.classList.remove("selected-button")):(pauseMakeQueue.classList.add("selected-button"),startMakeQueue.classList.remove("selected-button"),queueHolder.classList.remove("blinking-border")),e.forEach((e=>{const r=document.getElementById(e);for(;r.firstChild;)r.removeChild(r.firstChild);s.progressLists[e].length>0?document.getElementById(t[e]).classList.remove("invisible"):document.getElementById(t[e]).classList.add("invisible"),s.progressLists[e].forEach((s=>{if(!s)return;const t=document.createElement("img");t.src=s,t.className="image-item",t.classList.add(a[e]),r.appendChild(t)}))}))}}window.onmessage=a=>{const r=a.data;r&&(r.managerPort?(r.managerPort.onmessage=t,e=r.managerPort,r.managerPort.postMessage({progressLists:!0})):r.closeThisWindow&&s())},closeButton.onclick=()=>{s()},startMakeQueue.onclick=()=>{e&&e.postMessage({startMakeQueue:!0}),startMakeQueue.classList.add("selected-button"),pauseMakeQueue.classList.remove("selected-button"),queueHolder.classList.add("blinking-border"),queueImages.firstChild?.classList.remove("blinking-border")},pauseMakeQueue.onclick=()=>{e.postMessage({pauseMakeQueue:!0}),startMakeQueue.classList.remove("selected-button"),pauseMakeQueue.classList.add("selected-button"),queueHolder.classList.remove("blinking-border"),queueImages.firstChild.classList?.add("blinking-border")},clearMakeQueue.onclick=()=>{e.postMessage({clearMakeQueue:!0})},reloadIcon.onclick=()=>{reloadIcon.classList.add("roating"),e.postMessage({progressLists:!0,reloadFtarCount:!0})}})();