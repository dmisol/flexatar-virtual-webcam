(()=>{function e(){console.log("[FTAR_PROGRESS_UI_IFRAME]",...arguments)}let s;function t(){window.parent.postMessage({closeWindow:!0,portSelf:s},"*",[s])}function a(s){const t=s.data;if(t&&t.progressLists){reloadIcon.classList.remove("roating"),e("progress list",t.progressLists);const s=["successImages","errorImages","queueImages"],a={successImages:"successHolder",errorImages:"errorHolder",queueImages:"queueHolder"},r={successImages:"success",errorImages:"error",queueImages:"queue"},o=t.progressLists,i=o.flexatarCount;e("received ftar count",i),flexatarCountTextElement.textContent=`${i}`,delete o.flexatarCount,i<=0?(canCreateFlexatarSign.classList.add("invisible"),canNotCreateFlexatarSign.classList.remove("invisible")):(canCreateFlexatarSign.classList.remove("invisible"),canNotCreateFlexatarSign.classList.add("invisible"));const l=o.isQueueInProgress;delete o.isQueueInProgress,l?(queueHolder.classList.add("blinking-border"),startMakeQueue.classList.add("selected-button"),pauseMakeQueue.classList.remove("selected-button")):(pauseMakeQueue.classList.add("selected-button"),startMakeQueue.classList.remove("selected-button"),queueHolder.classList.remove("blinking-border")),s.forEach((e=>{const s=document.getElementById(e);for(;s.firstChild;)s.removeChild(s.firstChild);t.progressLists[e].length>0?document.getElementById(a[e]).classList.remove("invisible"):document.getElementById(a[e]).classList.add("invisible"),t.progressLists[e].forEach((t=>{if(!t)return;const a=document.createElement("img");a.src=t,a.className="image-item",a.classList.add(r[e]),s.appendChild(a)}))}))}}window.onmessage=r=>{const o=r.data;o&&(o.managerPort?(o.managerPort.onmessage=a,e("port obtained"),s=o.managerPort,o.managerPort.postMessage({progressLists:!0}),e("request progress list")):o.closeThisWindow&&t())},closeButton.onclick=()=>{t()},startMakeQueue.onclick=()=>{s&&s.postMessage({startMakeQueue:!0}),startMakeQueue.classList.add("selected-button"),pauseMakeQueue.classList.remove("selected-button"),queueHolder.classList.add("blinking-border"),queueImages.firstChild?.classList.remove("blinking-border")},pauseMakeQueue.onclick=()=>{s.postMessage({pauseMakeQueue:!0}),startMakeQueue.classList.remove("selected-button"),pauseMakeQueue.classList.add("selected-button"),queueHolder.classList.remove("blinking-border"),queueImages.firstChild.classList?.add("blinking-border")},clearMakeQueue.onclick=()=>{s.postMessage({clearMakeQueue:!0})},reloadIcon.onclick=()=>{reloadIcon.classList.add("roating"),s.postMessage({progressLists:!0,reloadFtarCount:!0})}})();